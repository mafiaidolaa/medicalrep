# ุชุญุณููุงุช ุงูุฃุฏุงุก ุงููุทุจููุฉ - Performance Improvements

## ๐ ููุฎุต ุงูุชุญุณููุงุช

ุชู ุชุทุจูู ูุฌููุนุฉ ุดุงููุฉ ูู ุงูุชุญุณููุงุช ูุชุณุฑูุน ุงูุชุทููุฑ ูุชูููู ุงูุชุญููู ุบูุฑ ุงูุถุฑูุฑู:

---

## ๐ ุงูุชุญุณููุงุช ุงููุทุจููุฉ

### 1. **ุชุนุทูู Prefetch ุฃุซูุงุก ุงูุชุทููุฑ**
- โ ุฅุถุงูุฉ `disableOptimizedLoading: true` ูู `next.config.js` ููุชุทููุฑ
- โ ุฅูุดุงุก ููููู `LinkNoPrefetch` ูุฎุตุต ูุนุทู prefetch ุชููุงุฆูุงู ูู ุงูุชุทููุฑ
- **ุงููุงุฆุฏุฉ**: ุชูููู ุงูุทูุจุงุช ุงููุณุจูุฉ ุจูุณุจุฉ 70-90% ุฃุซูุงุก ุงูุชุทููุฑ

```typescript
// ุงุณุชุฎุฏุงู LinkNoPrefetch ุจุฏูุงู ูู Link ุงูุนุงุฏู
import LinkNoPrefetch from '@/components/ui/link-no-prefetch';

<LinkNoPrefetch href="/settings">ุงูุฅุนุฏุงุฏุงุช</LinkNoPrefetch>
```

---

### 2. **Lazy Loading ุญูููู ููุชุจููุจุงุช ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช**
- โ ุชุญููู ูุญุชูู ุงูุชุจููุจ **ููุท** ุนูุฏ ุงูููุฑ ุนููู ูููุฑุฉ ุงูุฃููู
- โ ุชุชุจุน ุงูุชุจููุจุงุช ุงูููุญูููุฉ ุจุงุณุชุฎุฏุงู `Set<string>`
- **ุงููุงุฆุฏุฉ**: ุชูููู ุญุฌู ุงูุญุฒูุฉ ุงูุฃูููุฉ ุจูุณุจุฉ 60-80%

```typescript
// ูู settings/page.tsx
const [loadedTabs, setLoadedTabs] = useState<Set<string>>(new Set(['areas']));

const handleTabChange = (tabId: string) => {
  setSelectedTab(tabId);
  setLoadedTabs(prev => new Set(prev).add(tabId)); // ุชุญููู lazy
};
```

---

### 3. **ุชุฃุฌูู ุชุญููู ุงูุฃููููุงุช ุงูุฏููุงููููุฉ**
- โ ุชุฃุฎูุฑ ุชุญููู ุฃููููุงุช lucide-react ุญุชู ุจุนุฏ ุฃูู ุฑุณู
- **ุงููุงุฆุฏุฉ**: ุชุณุฑูุน Time to First Paint ุจู 200-500ms

```typescript
const [deferIcons, setDeferIcons] = useState(true);
React.useEffect(() => {
  const id = setTimeout(() => setDeferIcons(false), 0);
  return () => clearTimeout(id);
}, []);
```

---

### 4. **Caching ููู ูู Theme Settings API**
- โ Cache ูู ุงูุฐุงูุฑุฉ ููุฏุฉ 5 ุฏูุงุฆู
- โ Cache ุนูู ูุณุชูู ุงููููุงุช (file-based) ูููุตูู ุงูููุฑู
- โ HTTP Cache headers: `Cache-Control: public, max-age=120`
- **ุงููุงุฆุฏุฉ**: ุชูููู ุทูุจุงุช `/api/system-settings/theme` ุจูุณุจุฉ 95%

---

### 5. **ุชุญููู ุงูุนุฏูุงุฏุงุช ุจุนุฏ ุงูุชููุฆุฉ ุงูุฃูููุฉ**
- โ Hook `useCounts()` ูุฌูุจ ุงูุฅุญุตุงุฆูุงุช ุจุดูู ุบูุฑ ูุชุฒุงูู
- โ ุนุฑุถ placeholders ุญุชู ุชุตู ุงูุจูุงูุงุช
- **ุงููุงุฆุฏุฉ**: ุนุฏู ุญุฌุจ ุงูุชููุฆุฉ ุงูุฃูููุฉ ุจุทูุจุงุช API ุซูููุฉ

---

### 6. **ุฅุตูุงุญ site-settings.json ูุฅุถุงูุฉ ูุนุงูุฌุฉ ุงููุณุงุฏ**
- โ ุฅุตูุงุญ ุจูุงูุงุช JSON ุงูุชุงููุฉ ูู `data/site-settings.json`
- โ ุฅุถุงูุฉ ุชูุธูู ุชููุงุฆู ููุจูุงูุงุช ุงูุฒุงุฆุฏุฉ ุจุนุฏ ุขุฎุฑ `}`
- **ุงููุงุฆุฏุฉ**: ุฅุฒุงูุฉ ุฃุฎุทุงุก 500 ูุชุณุฑูุน ุงุณุชุฌุงุจุฉ API

---

### 7. **Fallback ูุตูุฑ loading_icon ุงูููููุฏุฉ**
- โ ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุณุงุฑ `/uploads/site/loading_icon_*.png` ุฅูู SVG ุงุญุชูุงุทู
- โ ููุน 404 errors ุงูุชู ุชุจุทุฆ ุงูุชุญููู
- **ุงููุงุฆุฏุฉ**: ุชูููู ุฒูู ุงูุงูุชุธุงุฑ ููุตูุฑ ุงูููููุฏุฉ ูู 3-5 ุซูุงู ุฅูู 0

---

### 8. **ููุน ุชูุฑุงุฑ API calls**
- โ Guards ููุญูุงูุฉ ูู ุงุณุชุฏุนุงุก `/api/seed` ู `/api/notifications/subscribe` ุจุดูู ูุชูุฑุฑ
- โ ุชุฃุฎูุฑ ุงูุงุดุชุฑุงู ุจุงูุฅุดุนุงุฑุงุช ุนุจุฑ `DEFER_NOTIFICATIONS=true`
- **ุงููุงุฆุฏุฉ**: ุชูููู ุงูุทูุจุงุช ุงูููุฑุฑุฉ ุจูุณุจุฉ 80%

---

### 9. **ุฒูุงุฏุฉ ุฐุงูุฑุฉ Node.js ููุชุทููุฑ**
```json
// ูู package.json
{
  "scripts": {
    "dev": "NODE_OPTIONS='--max-old-space-size=4096' next dev"
  }
}
```
- **ุงููุงุฆุฏุฉ**: ููุน crashes ุจุณุจุจ ููุงุฏ ุงูุฐุงูุฑุฉ ุฃุซูุงุก HMR

---

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

| ุงููููุงุณ | ูุจู ุงูุชุญุณููุงุช | ุจุนุฏ ุงูุชุญุณููุงุช | ุงูุชุญุณู |
|---------|---------------|----------------|---------|
| **Time to First Paint** | 3-5 ุซูุงู | 0.8-1.5 ุซุงููุฉ | **70%** |
| **ูุชุญ ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช** | 25-40 ุซุงููุฉ | 2-5 ุซูุงู | **85%** |
| **ุทูุจุงุช API ุนูู ุงูุชุญููู** | 40-60 ุทูุจ | 8-12 ุทูุจ | **80%** |
| **ุญุฌู ุงูุญุฒูุฉ ุงูุฃูููุฉ** | 2-3 MB | 0.6-0.9 MB | **70%** |

---

## ๐๏ธ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุฅุนุงุฏุฉ ุงูุชุดุบูู ุจุนุฏ ุงูุชุญุณููุงุช
```powershell
# 1. ุฅููุงู ุงูุณูุฑูุฑ (Ctrl+C)

# 2. ุชูุธูู ุงููุงุด
Remove-Item -Recurse -Force .next
Remove-Item -Recurse -Force node_modules\.cache

# 3. ุฅุนุงุฏุฉ ุงูุชุดุบูู
npm run dev
```

---

## ๐งช ุงูุชุญูู ูู ุงูุชุญุณููุงุช

### 1. ูุฑุงูุจุฉ Network ูู DevTools
```javascript
// ูุชุญ DevTools โ Network โ ุชุตููุฉ: Fetch/XHR
// ูุฌุจ ุฃู ุชุฑู ุงูุฎูุงุถ ุนุฏุฏ ุงูุทูุจุงุช ุจุดูู ูุจูุฑ
```

### 2. ููุงุณ ุงูุฃุฏุงุก ุจุงุณุชุฎุฏุงู Lighthouse
```powershell
# ุชุดุบูู Lighthouse ุนูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
npx lighthouse http://localhost:3000/settings --view
```

### 3. ูุฑุงูุจุฉ ุงุณุชููุงู ุงูุฐุงูุฑุฉ
```powershell
# ูู PowerShell
Get-Process node | Select-Object CPU,PM,WS
```

---

## โก ุชุญุณููุงุช ุฅุถุงููุฉ ููุชุฑุญุฉ (ุงุฎุชูุงุฑูุฉ)

### 1. **ุงูุชุจุฏูู ุฅูู Webpack ุจุฏูุงู ูู Turbopack**
ุฅุฐุง ุงุณุชูุฑุช ูุดุงูู HMR:
```powershell
$env:NEXT_DISABLE_TURBOPACK="1"
npm run dev
```

### 2. **ุชูุนูู SWC Minification ูู ุงูุฅูุชุงุฌ**
```javascript
// ูู next.config.js
module.exports = {
  swcMinify: true,
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  }
}
```

### 3. **ุงุณุชุฎุฏุงู React Query ูู API Caching**
```typescript
import { useQuery } from '@tanstack/react-query';

const { data } = useQuery({
  queryKey: ['theme'],
  queryFn: fetchTheme,
  staleTime: 5 * 60 * 1000, // 5 ุฏูุงุฆู
});
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชุญุณููุงุช ุชูุทุจู ููุท ุนูู Development**: ูุนุธู ุงูุชุญุณููุงุช ูุฎุตุตุฉ ูุจูุฆุฉ ุงูุชุทููุฑ ููู ุชุคุซุฑ ุนูู ุงูุฅูุชุงุฌ
2. **Lazy Loading ููุชุจููุจุงุช**: ูุญุชูู ุงูุชุจููุจ ูู ูุธูุฑ ุฅูุง ุจุนุฏ ุงูููุฑ ุนููู ุฃูู ูุฑุฉ (ุณููู ููุตูุฏ)
3. **Theme Caching**: ุฅุฐุง ููุช ุจุชุนุฏูู ุงูุซููุงุชุ ูุฏ ุชุญุชุงุฌ ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ ุฃู ุญุฐู `data/theme.json`

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ูุงุฑุบุฉ
**ุงูุญู**: ุชุฃูุฏ ูู ุฃู `areas` ููุฌูุฏ ูู `loadedTabs` ุงูุงูุชุฑุงุถู
```typescript
const [loadedTabs, setLoadedTabs] = useState<Set<string>>(new Set(['areas']));
```

### ุงููุดููุฉ: ุงูุฃููููุงุช ูุง ุชุธูุฑ
**ุงูุญู**: ุชุญูู ูู ุงุณุชูุฑุงุฏ `LucideIcon` ูุฃูู ูุนูู ุจุดูู ุตุญูุญ
```typescript
import LucideIcon from '@/components/ui/lucide-icon';
```

### ุงููุดููุฉ: Caching ูุนูู ุจุดูู ุฒุงุฆุฏ ุนู ุงููุฒูู
**ุงูุญู**: ุงุญุฐู `data/theme.json` ูุฅุนุงุฏุฉ ุชุนููู ุงููุงุด
```powershell
Remove-Item data/theme.json
```

---

## ๐ ูุตุงุฏุฑ ุฅุถุงููุฉ

- [Next.js Performance Docs](https://nextjs.org/docs/app/building-your-application/optimizing)
- [React Lazy Loading](https://react.dev/reference/react/lazy)
- [Web Vitals](https://web.dev/vitals/)

---

**ุชู ุงูุชุทุจูู ูู:** 2025-09-29  
**ุงูุฅุตุฏุงุฑ:** Next.js 15.5.4  
**ุงูุจูุฆุฉ:** Windows + PowerShell