# ุงุฎุชุจุงุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ - Frontend Testing
## Testing Areas & Lines Loading from Database

---

## ๐งช ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ

### 1. ุงุฎุชุจุงุฑ ุชุญููู ุงูุฅุนุฏุงุฏุงุช ุนูุฏ ุจุฏุก ุงูุชุทุจูู

#### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ
2. ุงูุชุญ Developer Console (F12)
3. ุงุจุญุซ ุนู ูุฐู ุงูุฑุณุงุฆู:

```
๐ Loading areas and lines from database...
โ Loaded areas from database: ["ุงููุงูุฑุฉ", "ุงูุฌูุฒุฉ", ...]
โ Loaded lines from database: ["ุงูุฎุท ุงูุฃูู", "ุงูุฎุท ุงูุซุงูู", ...]
```

#### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ูุฌุจ ุฃู ุชุธูุฑ ุงูููุงุทู ูุงูุฎุทูุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุง ุฃุฎุทุงุก ูู console
- โ ุงูููุงุฆู ุงูููุณุฏูุฉ ูู ุตูุญุฉ ุชุณุฌูู ุงูุนูุงุฏุงุช ุชุญุชูู ุนูู ุงูุจูุงูุงุช

---

### 2. ุงุฎุชุจุงุฑ ูู ุตูุญุฉ ุชุณุฌูู ุงูุนูุงุฏุงุช

#### ุงูุฎุทูุงุช:
1. ุงุฐูุจ ุฅูู `/clinics/register`
2. ุงูุญุต ุงููุงุฆูุฉ ุงูููุณุฏูุฉ "ุงูููุทูุฉ" (Area)
3. ุงูุญุต ุงููุงุฆูุฉ ุงูููุณุฏูุฉ "ุงูุฎุท" (Line)

#### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
```
ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ููููุทูุฉ ุชุญุชูู ุนูู:
โ ุงููุงูุฑุฉ
โ ุงูุฌูุฒุฉ
โ ุงูุงุณููุฏุฑูุฉ
โ ุงูุฏููููุฉ
โ ุงูุดุฑููุฉ
โ ุงููููููุฉ

ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ููุฎุท ุชุญุชูู ุนูู:
โ ุงูุฎุท ุงูุฃูู
โ ุงูุฎุท ุงูุซุงูู
โ ุงูุฎุท ุงูุซุงูุซ
โ ุงูุฎุท ุงูุฑุงุจุน
```

---

### 3. ุงุฎุชุจุงุฑ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช (Settings)

#### ุงูุฎุทูุงุช:
1. ุณุฌู ุฏุฎูู ูู Admin
2. ุงุฐูุจ ุฅูู `/settings`
3. ุงุจุญุซ ุนู ูุณู ุงูููุงุทู ูุงูุฎุทูุท

#### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ูุฌุจ ุฃู ุชุธูุฑ ุงูููุงุทู ูุงูุฎุทูุท ุงูุญุงููุฉ
- โ ูููู ุฅุถุงูุฉ ููุทูุฉ/ุฎุท ุฌุฏูุฏ (Admin ููุท)
- โ ูููู ุญุฐู ููุทูุฉ/ุฎุท (Admin ููุท)

---

### 4. ุงุฎุชุจุงุฑ ุงุณุชูุฑุงุฑูุฉ ุงูุจูุงูุงุช (Persistence)

#### ุงูุฎุทูุงุช:
1. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ (F5 ุฃู Ctrl+R)
2. ุฃุบูู ุงููุชุตูุญ ูุงูุชุญู ูุฑุฉ ุฃุฎุฑู
3. ุงูุณุญ Cache (Ctrl+Shift+Delete)
4. ุงูุชุญ ุงูุชุทุจูู ูู ูุงูุฐุฉ ุฎููุฉ (Incognito)

#### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ูู ุฌููุน ุงูุญุงูุงุชุ ูุฌุจ ุฃู ุชุธูุฑ ุงูููุงุทู ูุงูุฎุทูุท
- โ ุงูุจูุงูุงุช ุชูุญููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุณ ูู localStorage

---

### 5. ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช (Admin Only)

#### ุงูุฎุทูุงุช:
1. ุณุฌู ุฏุฎูู ูู Admin
2. ุงุฐูุจ ุฅูู `/settings`
3. ุฃุถู ููุทูุฉ ุฌุฏูุฏุฉ ูุซู "ุงูููููุจูุฉ"
4. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

#### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุงูููุทูุฉ ุงูุฌุฏูุฏุฉ ูุญููุธุฉ
- โ ุชุธูุฑ ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ ูู ุตูุญุฉ ุชุณุฌูู ุงูุนูุงุฏุงุช

---

## ๐ง ุงุฎุชุจุงุฑุงุช Developer Console

### ุงุฎุชุจุงุฑ ูุจุงุดุฑ ูู Console

ุงูุชุญ Developer Console ูุงูุชุจ:

```javascript
// Test 1: Check if areas and lines are loaded
const { areas, lines } = window.__NEXT_DATA__?.props?.pageProps || {};
console.log('Areas:', areas);
console.log('Lines:', lines);

// Test 2: Try to fetch from Supabase directly
// (ุงูุชุฑุถ ุฃู supabase client ูุชุงุญ)
const { data, error } = await supabase
  .from('system_settings')
  .select('setting_key, setting_value, is_public')
  .in('setting_key', ['app_areas', 'app_lines']);

console.log('From DB:', data);
console.log('Error:', error);

// Test 3: Check if data provider has the data
// (ูู ุตูุญุฉ ุชุณุชุฎุฏู useDataProvider)
// const { areas, lines } = useDataProvider();
```

---

## ๐ Checklist ุงูููุงุฆู

### Database โ
- [ ] Migration ุชู ุชุทุจููู ุจูุฌุงุญ
- [ ] ุญูู `is_public` ููุฌูุฏ ูู ุฌุฏูู `system_settings`
- [ ] Areas & Lines ูุญููุธุฉ ูุน `is_public = true`
- [ ] RLS policy "Public can read public settings" ููุฌูุฏุฉ
- [ ] ุฏุงูุฉ `get_public_settings()` ุชุนูู

### Frontend ๐จ
- [ ] ุงูููุงุทู ูุงูุฎุทูุท ุชุธูุฑ ูู `/clinics/register`
- [ ] ุงูููุงุฆู ุงูููุณุฏูุฉ ุชุญุชูู ุนูู ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
- [ ] Console logs ุชุธูุฑ ูุฌุงุญ ุงูุชุญููู
- [ ] ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู console
- [ ] ุงูุจูุงูุงุช ุชุณุชูุฑ ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุญููู

### Security ๐
- [ ] ุงููุณุชุฎุฏููู ุงูุนุงุฏููู ูููููู ูุฑุงุกุฉ Areas/Lines
- [ ] ููุท Admins ูููููู ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช
- [ ] RLS ูููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู

### Performance โก
- [ ] ุชุญููู ุงูุจูุงูุงุช ุณุฑูุน (< 500ms)
- [ ] Cache ูุนูู ุจุดูู ุตุญูุญ
- [ ] ูุง ุชูุฌุฏ ุทูุจุงุช API ุฒุงุฆุฏุฉ

---

## ๐ ูุดุงูู ูุญุชููุฉ ูุญููููุง

### ุงููุดููุฉ: ุงูููุงุทู ูุงูุฎุทูุท ูุง ุชุธูุฑ

**ุงูุณุจุจ ุงููุญุชูู 1:** RLS policy ูุง ุชุณูุญ ุจุงููุฑุงุกุฉ

**ุงูุญู:**
```sql
-- ูู Supabase SQL Editor
-- ุชุฃูุฏ ูู ูุฌูุฏ ูุฐู ุงูุณูุงุณุฉ:
SELECT * FROM pg_policies 
WHERE tablename = 'system_settings' 
  AND policyname = 'Public can read public settings';

-- ุฅุฐุง ูู ุชูู ููุฌูุฏุฉุ ุฃุนุฏ ุชุดุบูู Migration
```

**ุงูุณุจุจ ุงููุญุชูู 2:** ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏุฉ ูู DB

**ุงูุญู:**
```sql
-- ุชุญูู ูู ูุฌูุฏ ุงูุจูุงูุงุช:
SELECT * FROM system_settings 
WHERE setting_key IN ('app_areas', 'app_lines');

-- ุฅุฐุง ูู ุชูู ููุฌูุฏุฉุ ุฃุฏุฎููุง ูุฏูููุง:
INSERT INTO system_settings (category, setting_key, setting_value, is_public, is_enabled)
VALUES 
  ('general', 'app_areas', '["ุงููุงูุฑุฉ", "ุงูุฌูุฒุฉ", "ุงูุงุณููุฏุฑูุฉ"]'::jsonb, true, true),
  ('general', 'app_lines', '["ุงูุฎุท ุงูุฃูู", "ุงูุฎุท ุงูุซุงูู"]'::jsonb, true, true)
ON CONFLICT (category, setting_key) DO UPDATE 
SET setting_value = EXCLUDED.setting_value, is_public = true;
```

**ุงูุณุจุจ ุงููุญุชูู 3:** ุงูููุฏ ูู ูุชู ุชุญุฏูุซู

**ุงูุญู:**
```bash
# ุฃุนุฏ ุชุดุบูู Dev Server
npm run dev

# ุฃู ุงูุณุญ cache ูุฃุนุฏ ุงูุจูุงุก
rm -rf .next
npm run build
npm run dev
```

---

### ุงููุดููุฉ: Console ูุธูุฑ ุฃุฎุทุงุก RLS

**Error Example:**
```
Error: new row violates row-level security policy for table "system_settings"
```

**ุงูุญู:**
```sql
-- ุชุญูู ูู ุณูุงุณุงุช ุงูุฅุฏุฎุงู ูุงูุชุญุฏูุซ
SELECT policyname, cmd FROM pg_policies 
WHERE tablename = 'system_settings' 
  AND cmd IN ('INSERT', 'UPDATE');

-- ูุฌุจ ุฃู ูููู ููุงู ุณูุงุณุงุช ููู Admin
-- "Only admins can insert system settings"
-- "Only admins can update system settings"
```

---

### ุงููุดููุฉ: ุงูุจูุงูุงุช ูุง ุชูุญูุธ ุจุนุฏ ุงูุชุนุฏูู

**ุงูุณุจุจ:** ุงููุณุชุฎุฏู ููุณ Admin

**ุงูุญู:**
```sql
-- ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
SELECT id, username, role FROM users WHERE id = auth.uid();

-- ูุฌุจ ุฃู ูููู role = 'admin' ูุชุนุฏูู settings
```

---

## ๐ธ Screenshots ุงููุชููุนุฉ

### 1. Developer Console ุนูุฏ ุจุฏุก ุงูุชุทุจูู
```
๐ Loading areas and lines from database...
โ Loaded areas from database: Array(6) ["ุงููุงูุฑุฉ", "ุงูุฌูุฒุฉ", "ุงูุงุณููุฏุฑูุฉ", "ุงูุฏููููุฉ", "ุงูุดุฑููุฉ", "ุงููููููุฉ"]
โ Loaded lines from database: Array(4) ["ุงูุฎุท ุงูุฃูู", "ุงูุฎุท ุงูุซุงูู", "ุงูุฎุท ุงูุซุงูุซ", "ุงูุฎุท ุงูุฑุงุจุน"]
```

### 2. ุงูููุงุฆู ุงูููุณุฏูุฉ ูู Clinics Registration
```
[Dropdown: ุงูููุทูุฉ]
  - ุงููุงูุฑุฉ
  - ุงูุฌูุฒุฉ
  - ุงูุงุณููุฏุฑูุฉ
  - ุงูุฏููููุฉ
  - ุงูุดุฑููุฉ
  - ุงููููููุฉ

[Dropdown: ุงูุฎุท]
  - ุงูุฎุท ุงูุฃูู
  - ุงูุฎุท ุงูุซุงูู
  - ุงูุฎุท ุงูุซุงูุซ
  - ุงูุฎุท ุงูุฑุงุจุน
```

---

## โ ุงูุฎูุงุตุฉ

ุฅุฐุง ูุฌุญุช ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุฃุนูุงูุ ููุฐุง ูุนูู:

1. โ Migration ุชู ุชุทุจููู ุจูุฌุงุญ
2. โ Areas & Lines ูุญููุธุฉ ูู Database
3. โ RLS ูุนูู ุจุดูู ุตุญูุญ
4. โ Frontend ูุญููู ุงูุจูุงูุงุช ูู DB
5. โ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุงุจุฏุฃ ูู ุงุฎุชุจุงุฑ ุจููุฉ ุงููุธุงุฆู (Orders, Visits, etc.) ุจุงุณุชุฎุฏุงู Checklist ูู `IMPLEMENTATION_GUIDE.md`

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-01
**ุงูุฅุตุฏุงุฑ:** 1.0
