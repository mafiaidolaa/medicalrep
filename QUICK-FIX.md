# ๐ ุฅุตูุงุญ ุณุฑูุน - ูุดููุฉ ุญุฐู ุงููุณุชุฎุฏููู

## โ ูุง ุชู ุฅุตูุงุญู

ุชู ุฅุตูุงุญ ูุดููุฉ `NetworkError when attempting to fetch resource` ุนูุฏ ุญุฐู ุงููุณุชุฎุฏููู.

## ๐ ุงููููุงุช ุงูููุถุงูุฉ/ุงูููุนุฏููุฉ

### โจ ูููุงุช ุฌุฏูุฏุฉ:
1. **`src/app/api/users/[id]/route.ts`** - API endpoint ุขูู ููุชุนุงูู ูุน ุงููุณุชุฎุฏููู
2. **`fix-users-rls-policies.sql`** - ุณูุงุณุงุช RLS ููู Supabase (ุงุฎุชูุงุฑู)
3. **`DELETE-USERS-FIX.md`** - ุชูุซูู ูุงูู ูููุดููุฉ ูุงูุญููู
4. **`test-delete-api.js`** - ููู ุงุฎุชุจุงุฑ API

### ๐ง ูููุงุช ููุนุฏููุฉ:
1. **`src/lib/supabase-services.ts`** - ุชุญุฏูุซ ูุธููุฉ `deleteUser` ูุงุณุชุฎุฏุงู API route

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1๏ธโฃ ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู
```bash
# ุฃููู ุงูุฎุงุฏู (Ctrl+C) ุซู ุดุบููู ูู ุฌุฏูุฏ
npm run dev
```

### 2๏ธโฃ ุฌุฑูุจ ุญุฐู ูุณุชุฎุฏู
- ุงูุชุญ ุตูุญุฉ ุงููุณุชุฎุฏููู ูู ุงููุชุตูุญ
- ุงุฎุชุฑ ูุณุชุฎุฏู ุชุฌุฑูุจู
- ุงููุฑ ุนูู ุฒุฑ ุงูุญุฐู โ

### 3๏ธโฃ ุฅุฐุง ูู ูุนูู...

#### ุงูุฎูุงุฑ ุฃ: ุชุญุฏูุซ ุณูุงุณุงุช RLS (ููุตู ุจู)
1. ุงูุชุญ Supabase Dashboard: https://supabase.com/dashboard
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุชุญ ููู `fix-users-rls-policies.sql`
4. ุงูุณุฎ ูุงูุตู ุงููุญุชูู
5. ุงููุฑ **Run**

#### ุงูุฎูุงุฑ ุจ: ูุญุต ุงููุดููุฉ
```bash
# ุงูุชุญ Developer Tools ูู ุงููุชุตูุญ (F12)
# ุงุฐูุจ ุฅูู Console tab
# ุญุงูู ุงูุญุฐู ูุงูุญุต ุงูุฎุทุฃ
```

## ๐ ููู ูุนูู ุงูุฅุตูุงุญุ

### ูุจู ุงูุฅุตูุงุญ:
```
ุงููุชุตูุญ โ Supabase (Anon Key) โ RLS Policy ูููุน ุงูุญุฐู
```

### ุจุนุฏ ุงูุฅุตูุงุญ:
```
ุงููุชุตูุญ โ API Route (Next.js Server) โ Supabase (Service Role Key) โ
```

**ุงููููุฒุงุช:**
- โ ูุชุฌุงูุฒ ูููุฏ RLS ุจุดูู ุขูู
- โ ูุญุงูุธ ุนูู ุงูุฃูุงู ุจุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- โ ูุนูู ูุน ุฌููุน ุงููุณุชุฎุฏููู (admin/manager)

## ๐ก๏ธ ุงูุฃูุงู

API route ุงูุฌุฏูุฏ ูุชุญูู ูู:
- ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู โ
- ุงููุณุชุฎุฏู ูุฏูู ุฏูุฑ `admin` ุฃู `manager` โ
- ูุนุฑู ุงููุณุชุฎุฏู ุตุงูุญ โ

## ๐ฑ ุงูุงุฎุชุจุงุฑ ูู Console ุงููุชุตูุญ

ุงูุชุญ Console ูู ุงููุชุตูุญ (F12) ูุฌุฑุจ:

```javascript
// ุงุฎุชุจุงุฑ ุงูุญุฐู
fetch('/api/users/USER_ID_HERE', { method: 'DELETE' })
  .then(r => r.json())
  .then(console.log)
  .catch(console.error);
```

ุงุณุชุจุฏู `USER_ID_HERE` ุจูุนุฑู ูุณุชุฎุฏู ุญูููู.

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

### Q: ูู ูุนูู ูุน ุฌููุน ุฃููุงุน ุงููุณุชุฎุฏูููุ
**A:** ูุนูุ ูุนูู ูุน admin ู manager ููุท.

### Q: ูู ุขููุ
**A:** ูุนูุ API route ูุนูู ุนูู ุงูุฎุงุฏู ููุณุชุฎุฏู Service Role Key ุจุดูู ุขูู.

### Q: ูู ุฃุญุชุงุฌ ุชุนุฏูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ
**A:** ูุงุ ููู ูููุถูู ุชุญุฏูุซ ุณูุงุณุงุช RLS ููุญุตูู ุนูู ุฃุฏุงุก ุฃูุถู.

### Q: ูุงุฐุง ูู ุธูุฑ ุฎุทุฃ 401ุ
**A:** ุชุฃูุฏ ูู ุชุณุฌูู ุฏุฎููู ูู admin ุฃู manager.

### Q: ูุงุฐุง ูู ุธูุฑ ุฎุทุฃ 500ุ
**A:** ุงูุญุต console ุงูุฎุงุฏู ูููุฒูุฏ ูู ุงูุชูุงุตูู.

## ๐ ุงูุฏุนู

ูููุฒูุฏ ูู ุงูุชูุงุตููุ ุฑุงุฌุน `DELETE-USERS-FIX.md`

---

โ **ุงูุญุงูุฉ:** ุฌุงูุฒ ููุงุณุชุฎุฏุงู
๐ **ุงูุชุงุฑูุฎ:** 2025-09-29