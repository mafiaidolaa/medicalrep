# ๐ ุฏููู ุฅุนุฏุงุฏ ูุชุดุบูู ูุธุงู ุฅุฏุงุฑุฉ ุงูุทูุจุงุช

## ๐ ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

### 1. ุงูุจุฑูุฌูุงุช ุงููุทููุจุฉ
- **Node.js** (ุงูุฅุตุฏุงุฑ 18 ุฃู ุฃุญุฏุซ)
- **PostgreSQL** (ุงูุฅุตุฏุงุฑ 12 ุฃู ุฃุญุฏุซ)
- **npm** ุฃู **yarn**

### 2. ูุญุต ูุฌูุฏ PostgreSQL
ุชุฃูุฏ ูู ูุฌูุฏ PostgreSQL ูุฃูู ูุนูู:

```bash
# Windows
pg_ctl status

# Linux/Mac
sudo systemctl status postgresql
# ุฃู
brew services list | grep postgresql
```

## โ๏ธ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฃ. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
-- ุงุชุตู ุจู PostgreSQL ููุณุชุฎุฏู ูุดุฑู
psql -U postgres

-- ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
CREATE DATABASE orders_management WITH ENCODING 'UTF8';

-- ุฅูุดุงุก ูุณุชุฎุฏู ููุชุทุจูู (ุงุฎุชูุงุฑู ูููู ูููุตุญ ุจู)
CREATE USER orders_app WITH PASSWORD 'secure_password_123';

-- ููุญ ุงูุตูุงุญูุงุช
GRANT ALL PRIVILEGES ON DATABASE orders_management TO orders_app;

-- ุงูุฎุฑูุฌ ูู PostgreSQL
\q
```

#### ุจ. ุชูููุฐ ููู ุฅูุดุงุก ุงูุฌุฏุงูู

**ุฅุฐุง ูุงูุช ุงูุฌุฏุงูู ููุฌูุฏุฉ ูุณุจูุงู (ุฎุทุฃ "relation already exists"):**

```bash
# ุงูุทุฑููุฉ ุงูุณููุฉ: ุงุณุชุฎุฏู ุงูููู ุงูุฏูุนู (Windows)
setup-database.bat

# ุฃู ูุฏููุงู: ุงุญุฐู ุงูุฌุฏุงูู ุฃููุงู
psql -U postgres -d orders_management -f database/reset-database.sql

# ุซู ุฃูุดุฆ ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ
psql -U postgres -d orders_management -f database/orders-system-postgresql.sql
```

**ููุฅุนุฏุงุฏ ุงูุนุงุฏู:**
```bash
# ุชูููุฐ ููู PostgreSQL
psql -d orders_management -f database/orders-system-postgresql.sql

# ุฃู ุจุงุณุชุฎุฏุงู ูุณุชุฎุฏู ูุฎุตุต
psql -U orders_app -d orders_management -f database/orders-system-postgresql.sql
```

### 2. ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

#### ุฃ. ุฅูุดุงุก ููู ุงูุจูุฆุฉ
```bash
# ูุณุฎ ุงูููู ุงููููุฐุฌู
cp .env.example .env

# ุชุญุฑูุฑ ุงูููู
# Windows
notepad .env

# Linux/Mac
nano .env
# ุฃู
code .env
```

#### ุจ. ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ
```env
# ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
DB_HOST=localhost
DB_PORT=5432
DB_NAME=orders_management
DB_USER=orders_app
DB_PASSWORD=secure_password_123

# ุฅุนุฏุงุฏุงุช Next.js
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_generated_secret_key

# ููุชุงุญ ุงูุชุทุจูู
APP_SECRET=your_app_secret_key

# ุงูุนููุฉ ุงูุงูุชุฑุงุถูุฉ
DEFAULT_CURRENCY=EGP
```

### 3. ุชุซุจูุช ุงูุชุจุนูุงุช

```bash
# ุชุซุจูุช ุชุจุนูุงุช Node.js
npm install

# ุฃู ุจุงุณุชุฎุฏุงู yarn
yarn install
```

### 4. ุฅุถุงูุฉ ุชุจุนูุฉ PostgreSQL

```bash
# ุชุซุจูุช pg ููุงุชุตุงู ุจู PostgreSQL
npm install pg @types/pg

# ุชุซุจูุช ุชุจุนูุงุช ุฅุถุงููุฉ ูุทููุจุฉ
npm install bcryptjs @types/bcryptjs
npm install jsonwebtoken @types/jsonwebtoken
```

## ๐ฏ ุชุดุบูู ุงููุธุงู

### 1. ูุถุน ุงูุชุทููุฑ
```bash
# ุชุดุบูู ุฎุงุฏู ุงูุชุทููุฑ
npm run dev

# ุฃู
yarn dev
```

### 2. ุงููุตูู ูููุธุงู
- ุงูุชุญ ุงููุชุตูุญ ูุงูุชูู ุฅูู: `http://localhost:3000`
- ุตูุญุฉ ุงูุทูุจุงุช ุงููุญุณูุฉ: `http://localhost:3000/orders`

### 3. ุจูุงูุงุช ุงููุณุชุฎุฏููู ุงูุงูุชุฑุงุถูุฉ

ุจุนุฏ ุชูููุฐ ููู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุณุชุฌุฏ ุงููุณุชุฎุฏููู ุงูุชุงูููู:

| ุงูุฏูุฑ | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ูููุฉ ุงููุฑูุฑ | ุงูููุทูุฉ/ุงูุฎุท |
|-------|------------------|--------------|---------------|
| ูุฏูุฑ | `manager@example.com` | `password123` | ุงูุฑูุงุถ - ุงูุฎุท ุงูุฃูู |
| ููุฏูุจ ุทุจู | `rep@example.com` | `password123` | ุงูุฑูุงุถ - ุงูุฎุท ุงูุฃูู |
| ูุญุงุณุจ | `accountant@example.com` | `password123` | - |
| ูุดุฑู | `admin@example.com` | `password123` | - |

โ๏ธ **ุชุญุฐูุฑ**: ูุฌุจ ุชุบููุฑ ูููุงุช ุงููุฑูุฑ ูุจู ุงูุงุณุชุฎุฏุงู ุงููุนูู!

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุชุดุบูู ุงุฎุชุจุงุฑุงุช ุงููุธุงู
ุฏุงุฎู ุงููุธุงูุ ุงูุชูู ุฅูู ุตูุญุฉ ุงูุทูุจุงุช ูุงุจุญุซ ุนู ุนูุงูุฉ ุชุจููุจ "ุงุฎุชุจุงุฑ ุงููุธุงู" ูุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุงูุดุงููุฉ.

### 2. ูุญุต ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุฅูุดุงุก ููู ูุญุต ุจุณูุท
node -e "
const { Pool } = require('pg');
const pool = new Pool({
  host: 'localhost',
  port: 5432,
  database: 'orders_management',
  user: 'orders_app',
  password: 'secure_password_123'
});
pool.query('SELECT NOW()', (err, res) => {
  if (err) {
    console.log('ุฎุทุฃ ูู ุงูุงุชุตุงู:', err);
  } else {
    console.log('ูุฌุญ ุงูุงุชุตุงู:', res.rows[0]);
  }
  pool.end();
});
"
```

## ๐ ูููู ุงููููุงุช ุงูุฌุฏูุฏุฉ

```
src/
โโโ types/orders.ts                           # ุฃููุงุน ุงูุจูุงูุงุช
โโโ components/orders/
โ   โโโ index.ts                             # ููุฑุณ ุงูุชุตุฏูุฑ
โ   โโโ new-order-form-enhanced.tsx          # ูููุฐุฌ ุงูุทูุจ ุงููุญุณู
โ   โโโ previous-orders-enhanced.tsx         # ุงูุทูุจุงุช ุงูุณุงุจูุฉ
โ   โโโ order-ui-components.tsx              # ููููุงุช ุงููุงุฌูุฉ
โ   โโโ order-approval-system.tsx            # ูุธุงู ุงูุงุนุชูุงุฏ
โ   โโโ orders-system-test.tsx               # ูุธุงู ุงูุงุฎุชุจุงุฑ
โโโ hooks/
โ   โโโ use-orders-products-integration.ts   # ุชูุงูู ุงูููุชุฌุงุช
โโโ app/(dashboard)/orders/
โ   โโโ page-enhanced.tsx                    # ุตูุญุฉ ุงูุทูุจุงุช ุงููุญุณูุฉ
โโโ lib/
โ   โโโ database.ts                          # ุฏูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ database/
    โโโ orders-system-postgresql.sql         # PostgreSQL schema
    โโโ orders-system-schema.sql             # MySQL schema (ูููุฑุฌุนูุฉ)
```

## ๐จ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ูููุฐุฌ ุงูุทูุจ ุงููุญุณู
- ุงุฎุชูุงุฑ ุงูุนูุงุฏุฉ ูุน ุชูุงุตูู ุงูุทุจูุจ ูุงูุญุฏ ุงูุงุฆุชูุงูู
- ุฅุถุงูุฉ ุงูููุชุฌุงุช ูู ูุงุฆูุฉ ูุญุฏุซุฉ
- ุซูุงุซ ุทุฑู ุฎุตู: ูุณุจุฉ ูุฆููุฉุ ูุจูุบ ุซุงุจุชุ ุฏููู ูุฌุงูู
- ูููุฏ ุงูุฏููู: 3 ููุชุฌุงุช ูุญุฏ ุฃูุตูุ ูุทุนุฉ ูุงุญุฏุฉ ูู ูู ููุชุฌ
- ูุญุต ุงูุญุฏ ุงูุงุฆุชูุงูู ุชููุงุฆูุงู

### 2. ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุงูุณุงุจูุฉ
- ุจุญุซ ูููุชุฑุฉ ูุชูุฏูุฉ
- ุนูุงูุงุช ุชุจููุจ ุญุณุจ ุงูุญุงูุฉ
- ุฅุญุตุงุฆูุงุช ููุฑูุฉ
- ุชุตุฏูุฑ ุงูุจูุงูุงุช

### 3. ูุธุงู ุงูุงุนุชูุงุฏ
- ุงุนุชูุงุฏ ุงููุฏูุฑ ููุทูุจุงุช ุงููุจูุฑุฉ (> 1000 ุฌ.ู)
- ุงุนุชูุงุฏ ุงููุญุงุณุจ ููุฏูุน ุงูุขุฌู (> 5000 ุฌ.ู)
- ุชุชุจุน ุชุงุฑูุฎ ุงูุชุบููุฑุงุช

### 4. ุฅุฏุงุฑุฉ ุงููุฎุฒูู
- ุญุฌุฒ ูุคูุช ูููุฎุฒูู (30 ุฏูููุฉ)
- ุชุชุจุน ุงููุนุงููุงุช
- ุฅุฑุฌุงุน ุงููุฎุฒูู ุนูุฏ ุงูุฅูุบุงุก

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### 1. ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
Error: connect ECONNREFUSED 127.0.0.1:5432
```
**ุงูุญู**: ุชุฃูุฏ ูู ุชุดุบูู PostgreSQL:
```bash
# Windows
net start postgresql-x64-13

# Linux
sudo systemctl start postgresql

# Mac
brew services start postgresql
```

#### 2. ุฎุทุฃ ูู ุงููุตุงุฏูุฉ
```bash
Error: password authentication failed
```
**ุงูุญู**: ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ูู `.env`

#### 3. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ููุฌูุฏุฉ
```bash
Error: database "orders_management" does not exist
```
**ุงูุญู**: ุฃูุดุฆ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุง ูู ููุถุญ ุฃุนูุงู

#### 4. ุฎุทุฃ ูู ุงูุฃุฐููุงุช
```bash
Error: permission denied for table users
```
**ุงูุญู**: ุงููุญ ุงูุตูุงุญูุงุช ูููุณุชุฎุฏู:
```sql
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO orders_app;
GRANT ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public TO orders_app;
```

#### 5. ุฎุทุฃ ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ ูุณุจูุงู
```bash
ERROR: 42P07: relation "users" already exists
```
**ุงูุญู**: ุงุณุชุฎุฏู ููู ุฅุนุงุฏุฉ ุงูุชุนููู:
```bash
# Windows: ุงุณุชุฎุฏู ุงูููู ุงูุฏูุนู
setup-database.bat

# ุฃู ูุฏููุงู
psql -U postgres -d orders_management -f database/reset-database.sql
psql -U postgres -d orders_management -f database/orders-system-postgresql.sql
```

#### 6. PostgreSQL ุบูุฑ ูุชุงุญ ูู Command Line
```bash
psql : The term 'psql' is not recognized
```
**ุงูุญู**: 
- ุงุณุชุฎุฏู pgAdmin (ูุงุฌูุฉ ุฑุณูููุฉ)
- ุฃู ุฃุถู PostgreSQL ูููุณุงุฑ:
```powershell
$env:PATH += ";C:\Program Files\PostgreSQL\15\bin"
```
- ุฃู ุงุณุชุฎุฏู Supabase ุจุฏูุงู ูู PostgreSQL ุงููุญูู

> ๐ **ููุงุญุธุฉ**: ูุญู ูุดุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุชูุตููุ ุฑุงุฌุน [TROUBLESHOOT-DATABASE.md](TROUBLESHOOT-DATABASE.md)

## ๐ ุฃูุงู ุงูุฅูุชุงุฌ

### ูุจู ุงููุดุฑ ููุฅูุชุงุฌ:

1. **ุบููุฑ ูููุงุช ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ**:
```sql
UPDATE users SET password_hash = '$2b$10$your_new_hashed_password';
```

2. **ุงุญู ูุชุบูุฑุงุช ุงูุจูุฆุฉ**:
```bash
chmod 600 .env
```

3. **ุฃูุดุฆ ูุณุชุฎุฏู ูุงุนุฏุฉ ุจูุงูุงุช ูุญุฏูุฏ ุงูุตูุงุญูุงุช**

4. **ูุนูู SSL ูููุงุนุฏุฉ**

5. **ุฑุงุฌุน ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ูุงูุฃูุงู**

## ๐ ุงูุฏุนู ุงูููู

### ุฅุฐุง ูุงุฌูุช ูุดุงูู:

1. ุชุญูู ูู ูููุงุช ุงูุณุฌูุงุช (Logs)
2. ุชุฃูุฏ ูู ุชุดุบูู ุฌููุน ุงูุฎุฏูุงุช ุงููุทููุจุฉ
3. ุฑุงุฌุน ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุงุฎุชุจุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุฑุฏุงู

### ูุนูููุงุช ุงููุธุงู:
- **ุงูุฅุตุฏุงุฑ**: 1.0.0
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: PostgreSQL 12+
- **ุงูุฅุทุงุฑ**: Next.js 14
- **ุงููุบุฉ**: TypeScript

---

๐ **ูุธุงู ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**

ูููุฒูุฏ ูู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน ุงููุซุงุฆู ุงููููุฉ ูู ูุฌูุฏ `docs/` ุฃู ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.