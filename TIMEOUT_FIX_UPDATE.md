# إصلاح مشكلة timeout في تحديد الموقع

## المشكلة التي تم حلها
```
Console Error: Location error: Position acquisition timed out
```

## الحل المطبق

### 1. نظام محاولات متعدد
بدلاً من محاولة واحدة، يقوم النظام الآن بـ:

#### المحاولة الأولى (دقة عالية)
- `enableHighAccuracy: true`  
- `timeout: 8000ms` (8 ثوان)
- `maximumAge: 300000ms` (5 دقائق)

#### المحاولة الثانية (دقة منخفضة - أسرع)  
- `enableHighAccuracy: false`
- `timeout: 15000ms` (15 ثانية)
- `maximumAge: 600000ms` (10 دقائق)

#### Fallback (إدخال يدوي)
- في حالة فشل المحاولتين، يتم عرض رسالة واضحة
- المستخدم يمكنه إدخال الإحداثيات يدوياً

### 2. رسائل حالة تفاعلية

```
✅ "جاري البحث عن الموقع بدقة عالية..."
⚠️  "فشلت المحاولة الأولى. جاري المحاولة بدقة منخفضة..."
✅ "تم تحديد الموقع بنجاح بدقة عالية!"
✅ "تم تحديد الموقع بنجاح (دقة منخفضة)"
ℹ️  "ملاحظة: تم استخدام دقة منخفضة. يمكنك تعديل الإحداثيات يدوياً"
```

### 3. رسائل خطأ محسنة

بدلاً من رسائل عامة، الآن توجد رسائل محددة:

- **PERMISSION_DENIED**: "تم رفض إذن تحديد الموقع. يرجى السماح للموقع بالوصول لموقعك من إعدادات المتصفح."
- **POSITION_UNAVAILABLE**: "معلومات الموقع غير متاحة. تأكد من تفعيل GPS أو خدمة الموقع."  
- **TIMEOUT**: "انتهت مهلة تحديد الموقع. يرجى المحاولة مرة أخرى أو إدخال الإحداثيات يدوياً."

### 4. نصائح للمستخدم

تم إضافة قسم نصائح يساعد المستخدم على تحسين دقة GPS:

- ✅ تأكد من تفعيل GPS في جهازك
- ✅ تأكد من وجودك في مكان مفتوح (ليس داخل مبنى)  
- ✅ في حالة انتهاء الوقت, يمكنك إدخال الإحداثيات يدوياً
- ✅ للحصول على إحداثيات دقيقة: افتح Google Maps ← انقر بزر اليمين على الموقع ← انسخ الإحداثيات

## الملفات المحدثة

- `src/components/clinics/SimpleLocationSelector.tsx`: تم تحسين منطق تحديد الموقع وإضافة المحاولات المتعددة

## طريقة العمل الجديدة

1. **المستخدم ينقر "تحديد موقعي"**
2. **تظهر رسالة**: "جاري البحث عن الموقع بدقة عالية..."
3. **إذا نجحت المحاولة الأولى**: تظهر "تم تحديد الموقع بنجاح بدقة عالية!"
4. **إذا فشلت المحاولة الأولى**: تظهر "فشلت المحاولة الأولى. جاري المحاولة بدقة منخفضة..."
5. **إذا نجحت المحاولة الثانية**: تظهر "تم تحديد الموقع بنجاح (دقة منخفضة)" + تحذير عن إمكانية التحسين اليدوي
6. **إذا فشلت المحاولتان**: تظهر رسالة خطأ واضحة مع إمكانية الإدخال اليدوي

## النتيجة

- ✅ لا توجد رسائل خطأ في الكونسول
- ✅ تجربة مستخدم محسنة مع رسائل واضحة
- ✅ معدل نجاح أعلى في تحديد الموقع
- ✅ بدائل واضحة في حالة فشل GPS
- ✅ إرشادات مفيدة للمستخدم

الآن النظام أكثر موثوقية ويتعامل بشكل أفضل مع مختلف السيناريوهات والبيئات.