# 🏥 نظام إدارة الطلبات - EP Group System

<div align="center">

[![Next.js](https://img.shields.io/badge/Next.js-14-black)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue)](https://www.typescriptlang.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-12+-blue)](https://postgresql.org/)
[![License](https://img.shields.io/badge/License-Private-red)](#)

**نظام إدارة طلبات شامل ومتطور للشركات الطبية**

[الميزات](#-الميزات) • [التثبيت السريع](#-التثبيت-السريع) • [الوثائق](#-الوثائق) • [المساهمة](#-المساهمة)

</div>

---

## 📋 نظرة عامة

نظام إدارة الطلبات المحسن هو حل متكامل لإدارة طلبات المنتجات الطبية، يشمل إدارة العيادات، المندوبين، المخزون، والموافقات المالية. تم تطويره باستخدام أحدث التقنيات لضمان الأداء العالي والأمان.

### 🎯 الهدف من النظام
- تبسيط عملية إنشاء وإدارة الطلبات
- توفير نظام شامل لمتابعة المخزون والمبيعات
- إنشاء آلية موافقات مرنة للطلبات الكبيرة
- توفير تقارير مفصلة للإدارة والمحاسبة

---

## ✨ الميزات

### 🔥 الميزات الحديثة المضافة
- **نموذج طلب محسن** - واجهة سهلة الاستخدام مع فحص تلقائي للحد الائتماني
- **إدارة مخزون ذكية** - حجز مؤقت وتتبع المعاملات في الوقت الفعلي
- **نظام موافقات متدرج** - موافقة المدير والمحاسب حسب قيمة الطلب
- **تكامل كامل مع المنتجات** - ربط مباشر بقاعدة بيانات المنتجات
- **إحصائيات فورية** - لوحة تحكم تفاعلية مع مؤشرات الأداء
- **نظام اختبار شامل** - اختبارات تلقائية لضمان سلامة النظام

### 💼 الميزات الأساسية
- ✅ **إدارة المستخدمين** - أدوار متعددة (مدير، مندوب، محاسب، مشرف)
- ✅ **إدارة العيادات** - معلومات شاملة للأطباء والعيادات
- ✅ **إدارة المنتجات** - كتالوج كامل مع تتبع المخزون
- ✅ **نظام الطلبات** - إنشاء وتتبع الطلبات مع خيارات خصم متنوعة
- ✅ **إدارة المالية** - حدود ائتمانية وأنواع دفع متعددة
- ✅ **التقارير والإحصائيات** - تقارير مفصلة للمبيعات والمخزون
- ✅ **المناطق والخطوط** - تنظيم إقليمي للمندوبين

---

## 🚀 التثبيت السريع

### المتطلبات
- **Node.js** 18+ 
- **PostgreSQL** 12+
- **npm** أو **yarn**

### خطوات الإعداد

```bash
# 1. نسخ المشروع
git clone https://github.com/your-org/ep-group-system.git
cd ep-group-system

# 2. تثبيت التبعيات
npm install

# 3. إعداد قاعدة البيانات
# راجع SETUP-ORDERS-SYSTEM.md للتفاصيل الكاملة
createdb orders_management
psql -d orders_management -f database/orders-system-postgresql.sql

# 4. تكوين البيئة
cp .env.example .env
# قم بتحرير .env وأضف إعداداتك

# 5. تشغيل النظام
npm run dev
```

**🔗 الوصول للنظام**: `http://localhost:3000/orders`

> 📖 **للحصول على تعليمات مفصلة**: راجع [دليل الإعداد](SETUP-ORDERS-SYSTEM.md)

---

## 🏗️ التقنيات المستخدمة

### Frontend
- **Next.js 14** - إطار العمل الأساسي مع App Router
- **TypeScript** - لضمان جودة الكود ومنع الأخطاء
- **Tailwind CSS** - لتصميم واجهة مستخدم عصرية وسريعة
- **React Hook Form** - لإدارة النماذج بكفاءة
- **Radix UI** - مكونات واجهة المستخدم العالية الجودة

### Backend
- **PostgreSQL** - قاعدة بيانات قوية وموثوقة
- **Prisma/Raw SQL** - طبقة قاعدة البيانات المرنة
- **NextAuth.js** - نظام مصادقة آمن ومرن

### التطوير والاختبار
- **ESLint & Prettier** - لضمان جودة الكود
- **TypeScript** - فحص الأنواع في وقت التطوير
- **Custom Testing System** - نظام اختبار مدمج للوظائف الحيوية

---

## 📁 هيكل المشروع

```
EP-Group-System/
├── 📁 src/
│   ├── 📁 app/(dashboard)/
│   │   ├── 📁 orders/               # صفحات إدارة الطلبات
│   │   ├── 📁 products/             # إدارة المنتجات
│   │   ├── 📁 clinics/              # إدارة العيادات
│   │   └── 📁 users/                # إدارة المستخدمين
│   ├── 📁 components/
│   │   ├── 📁 orders/               # مكونات نظام الطلبات المحسن
│   │   ├── 📁 ui/                   # مكونات واجهة المستخدم
│   │   └── 📁 forms/                # النماذج والمدخلات
│   ├── 📁 lib/
│   │   ├── 📄 database.ts           # وظائف قاعدة البيانات
│   │   └── 📄 utils.ts              # وظائف مساعدة
│   ├── 📁 types/
│   │   └── 📄 orders.ts             # تعريفات الأنواع
│   └── 📁 hooks/                    # React Hooks مخصصة
├── 📁 database/
│   ├── 📄 orders-system-postgresql.sql  # PostgreSQL Schema
│   └── 📄 orders-system-schema.sql      # MySQL Schema (مرجع)
├── 📄 SETUP-ORDERS-SYSTEM.md       # دليل الإعداد المفصل
├── 📄 .env.example                  # نموذج متغيرات البيئة
└── 📄 README.md                     # هذا الملف
```

---

## 🎮 استخدام النظام

### 🔑 تسجيل الدخول
استخدم المستخدمين الافتراضيين للبدء:

| الدور | البريد الإلكتروني | كلمة المرور | الصلاحيات |
|-------|------------------|--------------|-----------||
| **مدير** | manager@example.com | password123 | إنشاء الطلبات + الموافقة |
| **مندوب طبي** | rep@example.com | password123 | إنشاء الطلبات |
| **محاسب** | accountant@example.com | password123 | مراجعة مالية |
| **مشرف** | admin@example.com | password123 | إدارة شاملة |

> ⚠️ **مهم**: غيّر كلمات المرور فور التشغيل!

### 📊 الوظائف الرئيسية

#### 1. إنشاء طلب جديد
```
الطلبات → إنشاء طلب جديد
↓
اختر العيادة → أضف المنتجات → طبق الخصم → إرسال للمراجعة
```

#### 2. مراجعة الطلبات السابقة
```
الطلبات → الطلبات السابقة
↓
البحث والفلترة → عرض التفاصيل → تصدير البيانات
```

#### 3. نظام الموافقات
```
الطلب > 1000 ج.م → موافقة المدير مطلوبة
الدفع الآجل > 5000 ج.م → موافقة المحاسب مطلوبة
```

---

## 🧪 نظام الاختبار

يتضمن النظام مجموعة شاملة من الاختبارات:

### تشغيل الاختبارات
1. انتقل إلى صفحة الطلبات: `/orders`
2. اختر علامة تبويب **"اختبار النظام"**
3. انقر على **"تشغيل جميع الاختبارات"**

### أنواع الاختبارات
- ✅ **اختبار واجهة المستخدم** - التأكد من عمل جميع المكونات
- ✅ **اختبار قاعدة البيانات** - فحص الاستعلامات والعمليات
- ✅ **اختبار المنطق التجاري** - التحقق من قواعد الأعمال
- ✅ **اختبار التكامل** - فحص التفاعل بين الأنظمة
- ✅ **اختبار الأداء** - قياس سرعة الاستجابة

---

## 🔧 التكوين والإعدادات

### متغيرات البيئة الأساسية

```env
# قاعدة البيانات
DB_HOST=localhost
DB_PORT=5432
DB_NAME=orders_management
DB_USER=orders_app
DB_PASSWORD=secure_password_123

# التطبيق
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_secret_key
APP_SECRET=your_app_secret
DEFAULT_CURRENCY=EGP
```

### إعدادات مخصصة
- **الحد الائتماني الافتراضي**: يمكن تعديله من إعدادات النظام
- **مدة حجز المخزون**: 30 دقيقة (قابل للتخصيص)
- **حدود الموافقة**: مدير (1000+)، محاسب (5000+)

---

## 🤝 المساهمة

### للمطورين

```bash
# Fork the repository
git clone https://github.com/your-username/ep-group-system.git

# Create a feature branch
git checkout -b feature/amazing-feature

# Commit your changes
git commit -m 'Add amazing feature'

# Push to the branch
git push origin feature/amazing-feature

# Create a Pull Request
```

### إرشادات المساهمة
- اتبع معايير TypeScript المعمول بها
- أضف اختبارات للميزات الجديدة
- حدث الوثائق عند الضرورة
- استخدم الرسائل الوصفية في commits

---

## 📞 الدعم والمساعدة

### الحصول على المساعدة

1. **الوثائق المحلية**: راجع [SETUP-ORDERS-SYSTEM.md](SETUP-ORDERS-SYSTEM.md)
2. **اختبار النظام**: استخدم علامة تبويب "اختبار النظام" لتشخيص المشاكل
3. **ملفات السجلات**: تحقق من console logs في المتصفح

### مشاكل شائعة وحلولها

<details>
<summary><strong>خطأ الاتصال بقاعدة البيانات</strong></summary>

```bash
# تحقق من حالة PostgreSQL
pg_ctl status

# إعادة تشغيل PostgreSQL
net start postgresql-x64-13  # Windows
sudo systemctl restart postgresql  # Linux
```
</details>

<details>
<summary><strong>مشاكل المصادقة</strong></summary>

- تحقق من ملف `.env` ومطابقة البيانات
- تأكد من إنشاء المستخدم في قاعدة البيانات
- راجع إعدادات `NextAuth`
</details>

<details>
<summary><strong>أخطاء في الواجهة</strong></summary>

```bash
# حذف node_modules وإعادة التثبيت
rm -rf node_modules
npm install

# مسح cache
npm run dev -- --reset-cache
```
</details>

---

## 📊 إحصائيات المشروع

- **📁 إجمالي الملفات**: 50+ ملف
- **💻 أسطر الكود**: 15,000+ سطر
- **🧪 الاختبارات**: 25+ اختبار شامل
- **🏗️ المكونات**: 30+ مكون React
- **📊 جداول قاعدة البيانات**: 15+ جدول
- **🔧 إجراءات مخزنة**: 10+ إجراء
- **⚡ مشغلات**: 8+ trigger

---

## 📝 الإصدارات والتحديثات

### الإصدار الحالي: v1.0.0

#### ✨ ما الجديد
- نظام إدارة الطلبات المحسن بالكامل
- واجهة مستخدم عصرية ومتجاوبة
- نظام اختبار شامل ومدمج
- إدارة مخزون ذكية مع الحجز المؤقت
- نظام موافقات متدرج ومرن

#### 🔄 التحديثات القادمة (v1.1.0)
- [ ] إضافة تقارير متقدمة
- [ ] دعم الإشعارات الفورية
- [ ] تطبيق جوال
- [ ] دعم العملات المتعددة
- [ ] نظام backup تلقائي

---

## 📄 الترخيص

هذا المشروع مملوك لشركة EP Group ومخصص للاستخدام الداخلي فقط.

© 2024 EP Group. جميع الحقوق محفوظة.

---

## 🙏 شكر وتقدير

شكر خاص للفرق التي ساهمت في تطوير هذا النظام:
- **فريق التطوير**: تطوير النظام الأساسي والميزات المتقدمة  
- **فريق ضمان الجودة**: الاختبار والتحقق من الجودة
- **فريق تحليل الأعمال**: تحديد المتطلبات وتحسين العمليات

---

<div align="center">
  
**🚀 نظام إدارة الطلبات - مصمم خصيصاً لـ EP Group**

[⬆️ العودة للأعلى](#-نظام-إدارة-الطلبات---ep-group-system)

</div>
